<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Shibolet Order Sheet</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <style type="text/css">
        #orderForm section{clear: both; margin-bottom: 20px;}
        #orderForm ul{margin: 0; padding: 0;}        
        #orderForm li{
            border:1px solid #eee;
            width: 30%;
            float: left;
            position: relative;
            list-style: none;
        }

        #orderForm li.selected{background-color: #ddd;}
        #orderForm li fieldset{ border: none;}
        #orderForm img{max-width: 180px;}
        #orderForm li span{display: block;}
        #orderForm .item-select{display: none;}
        #orderForm .item-select-label{
            position: absolute;
            width: 100%;
            height: 60%;
        }
        #order-details{
            clear: both;
            padding: 30px;
            margin:30px 0 0;
        }
        </style>
    </head>
    <body>



<h1>Shibolet Inc.</h1>

<nav class="order-nav">
    <a href="#honey" data-catagory="honey">Honey</a>
    <a href="#tea" data-catagory="tea">tea</a>
    <a href="#nuts" data-catagory="nuts">nuts</a>
</nav> 

<form id="orderForm">
    <section id="honey"></section>
    <section id="tea"></section>
    <section id="nuts"></section>
</form>


<form id="order-details">
    <h3>Order Information:</h3>
    <fieldset>
        <span class="order-salesmen-id">
            <label>Date:</label>
            <input type="date" name="order-date" value="002">
        </span>
       <span class="order-salesmen-id">
            <label>salesmen-id</label>
            <input type="text" name="salesmen-id" value="002">
        </span>
    </fieldset>

    <fieldset>
        <span class="order-customer-name">
            <label>Customer Company</label>
            <input type="text" name="customer-name">
        </span>
    </fieldset>
    <span class="order-customer-name">
        <label>Customer Contact name</label>
        <input type="text" name="customer-name">
    </span>

    <span class="order-customer-phone">
        <label>Customer Contact phone</label>
        <input type="text" name="customer-name">
    </span>


    <span class="order-customer-address">
        <label>Customer Address</label>
        <input type="text" name="customer-name">
    </span>

    <span class="order-customer-phone">
        <label>Order needed by:</label>
        <input type="text" name="order-needed-by">
    </span>

    <span class="order-comments">
        <label>General comments:</label>
        <input type="text" name="order-comments">
    </span>


    <button>Submit Order</button>

</form>





<script src="src/jquery-3.1.1.min.js"></script>
<script src="src/microTmpl.js"></script>

<script>

// add local storage
   $(".order-nav a").on("click", function onClick() {
       jThis = $(this),
        catagory = jThis.attr("data-catagory");
        if(jThis.hasClass("loaded")) return;
        $.getJSON("data/"+catagory+".json", function(data){
            renderSection({
                catagory:catagory,
                data:data
            })
        });
   });

   $("#orderForm").on("change", ".item-select", function(){
    var jThis = $(this),
        selected = jThis.prop("checked");
        jThis.closest("li").toggleClass("selected", selected);
   });

    renderSection = function renderSection(dataObj) {
        var ele = $("#"+dataObj.catagory);
        ele.html(tmpl("catagoryTmpl", dataObj));
    }

</script>



    <script type="tmpl" id="catagoryTmpl">
        <h1><%=catagory%></h1> 
        <ul>
            <%data.forEach(function(e){%>
                <li data-id="<%=e.id%>">
                    <fieldset>
                        <label class="item-select-label" for="select-<%=e.id%>"></label>   
                        <input class="item-select" name="<%=e.id%>" id="select-<%=e.id%>" type="checkbox">
                        <span class="item-title"><%=e.title%></span>
                        <img src="images/<%=e.image%>">
                        <span class="item-price">Price: <%=e.price%></span>
                        <span class="item-certification">
                            certification: <%=e.certification%>
                        </span>
                        <span class="item-size">Size: <%=e.size%></span>
                        <span class"item-qty">
                            Qty: <input type="number" name="qty" value="1">
                        </span>
                        <span class"item-comment">
                            comment: <input name="comment" type="text">  
                        </span>
                    </fieldset>
                </li>
            <%});%> 
        </ul>
    </script>




        <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
        <script>
            window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
            ga('create','UA-XXXXX-Y','auto');ga('send','pageview')
        </script>
        <script src="https://www.google-analytics.com/analytics.js" async defer></script>
    </body>
</html>